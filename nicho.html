<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Decants Perfumes de Lujo | Boadicea, Roja Dove, Clive Christian | Essence Decants</title>

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="Decants de los perfumes más exclusivos del mundo. Boadicea the Victorious, Roja Parfums, Clive Christian y más. Fragancias ultra-lujo desde 46,99€. Envío a toda España.">
    <meta name="keywords"
        content="decants perfumes lujo, Boadicea the Victorious, Roja Parfums, Clive Christian, perfumes exclusivos, fragancias premium, decants ultra-lujo, perfumes caros, luxury perfumes españa">
    <meta name="author" content="Essence Decants">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://essencedecants.com/nicho.html">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://essencedecants.com/nicho.html">
    <meta property="og:title" content="Decants de Perfumes de Lujo | Essence Decants">
    <meta property="og:description"
        content="Los perfumes más exclusivos del mundo en formato decant. Boadicea, Roja, Clive Christian.">
    <meta property="og:image" content="https://essencedecants.com/logo.png">
    <meta property="og:locale" content="es_ES">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "CollectionPage",
        "name": "Decants de Perfumes de Lujo",
        "description": "Colección exclusiva de decants de las casas de perfumería más prestigiosas del mundo",
        "url": "https://essencedecants.com/nicho.html",
        "breadcrumb": {
            "@type": "BreadcrumbList",
            "itemListElement": [
                {"@type": "ListItem", "position": 1, "name": "Inicio", "item": "https://essencedecants.com/"},
                {"@type": "ListItem", "position": 2, "name": "Luxury Parfums", "item": "https://essencedecants.com/nicho.html"}
            ]
        }
    }
    </script>

    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #000000;
            color: #ffffff;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            overflow-x: hidden;
            overflow-x: hidden;
        }

        /* Header Styling (Same as Index) */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 2rem 4rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            box-sizing: border-box;
            background-color: #000000;
            transition: transform 0.3s ease-in-out;
        }

        header.header-hidden {
            transform: translateY(-100%);
        }

        .logo-img {
            height: 60px;
            width: auto;
            object-fit: contain;
        }

        nav {
            margin-left: auto;
            margin-right: 3rem;
        }

        nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            gap: 2rem;
        }

        nav a {
            color: #ffffff;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            font-size: 0.9rem;
            transition: color 0.3s;
            opacity: 0.8;
        }

        nav a:hover {
            opacity: 1;
            color: #D4AF37;
        }

        /* Catalog Container */
        .catalog-container {
            max-width: 1200px;
            margin: 150px auto 50px;
            padding: 0 2rem;
        }

        h1 {
            font-size: 3rem;
            font-weight: 300;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: #D4AF37;
            text-align: center;
            margin-bottom: 3rem;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
                letter-spacing: 0.1em;
                margin-bottom: 1.5rem;
                padding: 0 1rem;
                line-height: 1.3;
                word-wrap: break-word;
            }
        }

        /* Product Grid */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            /* Force 4 columns */
            gap: 2rem;
        }

        /* Responsive Grid */
        @media (max-width: 1200px) {
            .product-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 992px) {
            .product-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {

            html,
            body {
                overflow-x: hidden !important;
                max-width: 100vw !important;
            }

            .product-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 4px !important;
                padding: 0 4px !important;
            }

            /* Deshabilitar hover en móvil */
            .product-card:hover {
                transform: none !important;
                border-color: #333 !important;
            }

            .product-card:hover .product-image {
                transform: none !important;
            }

            .product-card {
                padding: 0.5rem !important;
                border-radius: 10px !important;
                overflow: hidden !important;
                display: flex !important;
                flex-direction: column !important;
                justify-content: flex-start !important;
                align-items: stretch !important;
            }

            .product-image {
                width: calc(100% - 1rem) !important;
                height: auto !important;
                aspect-ratio: 1 / 1 !important;
                flex-shrink: 0 !important;
                margin: 0.5rem auto !important;
                padding: 0 !important;
                border-radius: 8px !important;
                object-fit: cover !important;
                object-position: center !important;
                display: block !important;
            }

            .product-brand {
                display: block !important;
                font-size: 0.65rem !important;
                color: #888 !important;
                text-transform: uppercase !important;
                letter-spacing: 0.05em !important;
                margin: 0.3rem 0 0.1rem 0 !important;
                padding: 0 0.4rem !important;
                text-align: center !important;
            }

            .product-title {
                font-size: 1rem !important;
                font-weight: 600 !important;
                color: #ffffff !important;
                margin: 0.1rem 0 0.2rem 0 !important;
                line-height: 1.15 !important;
                padding: 0 0.4rem !important;
                text-align: center !important;
            }

            .product-price {
                font-size: 1.1rem !important;
                margin: 0.1rem 0 0.3rem 0 !important;
                padding: 0 0.4rem !important;
                text-align: center !important;
            }

            .add-btn {
                padding: 0.6rem 0.8rem !important;
                font-size: 0.65rem !important;
                letter-spacing: 0.05em !important;
                width: 80% !important;
                margin: 0.5rem auto 0.8rem auto !important;
                border-radius: 8px !important;
            }
        }

        @media (max-width: 480px) {
            .product-grid {
                gap: 0.4rem;
            }

            .product-brand {
                font-size: 0.45rem;
            }

            .product-title {
                font-size: 0.65rem;
            }

            .product-price {
                font-size: 0.7rem;
            }

            .add-btn {
                padding: 0.25rem 0.3rem;
                font-size: 0.45rem;
            }
        }

        /* Product Card */
        .product-card {
            background: rgba(20, 20, 20, 0.5);
            border: 1px solid #333;
            padding: 1.5rem 1rem 1rem 1rem;
            /* Reduced bottom padding */
            text-align: center;
            transition: transform 0.3s, border-color 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            /* Clickable */
            text-decoration: none;
            /* Remove link underline */
            color: inherit;
            /* Inherit text color */
            border-radius: 20px;
            /* Rounded corners */
            overflow: hidden;
            /* Ensure content respects rounded corners */
        }

        .product-card:hover {
            transform: translateY(-10px);
            border-color: #D4AF37;
        }

        .product-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            margin-bottom: 1.5rem;
            border-radius: 10px;
            transition: transform 0.3s;
        }

        .product-card:hover .product-image {
            transform: scale(1.05);
        }

        .product-title {
            font-size: 1.2rem;
            font-weight: 500;
            margin: 0.5rem 0;
            letter-spacing: 0.05em;
        }

        .product-brand {
            font-size: 0.9rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 0.5rem;
        }

        .product-price {
            font-size: 1.1rem;
            color: #D4AF37;
            margin-bottom: 1.5rem;
            font-weight: bold;
        }

        .add-btn {
            padding: 0.8rem 2rem;
            border: 1px solid #D4AF37;
            background: transparent;
            color: #D4AF37;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .add-btn:hover {
            background: #D4AF37;
            color: #000000;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.4);
        }

        /* Mobile Menu Styles */
        .hamburger {
            display: none;
            cursor: pointer;
            z-index: 102;
        }

        .hamburger span {
            display: block;
            width: 30px;
            height: 2px;
            background-color: #D4AF37;
            margin: 6px 0;
            transition: 0.4s;
        }

        @media (max-width: 768px) {
            header {
                padding: 1rem 0.75rem;
                width: 100%;
                box-sizing: border-box;
            }

            .logo-img {
                height: 45px;
            }

            .header-actions {
                gap: 0.75rem;
                align-items: center;
            }

            /* Ocultar user-controls en móvil */
            .user-controls {
                display: none;
            }

            /* Carrito del mismo tamaño que hamburger */
            .cart-icon-container {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .cart-icon {
                width: 24px;
                height: 24px;
                stroke: #D4AF37;
            }

            /* Estilo para Cuenta en el menú */
            .nav-account-link {
                color: #D4AF37 !important;
                opacity: 1 !important;
            }

            .hamburger {
                display: block;
            }

            .hamburger.active span:nth-child(1) {
                transform: rotate(-45deg) translate(-5px, 6px);
            }

            .hamburger.active span:nth-child(2) {
                opacity: 0;
            }

            .hamburger.active span:nth-child(3) {
                transform: rotate(45deg) translate(-5px, -6px);
            }

            nav {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                background-color: #000000;
                display: flex;
                justify-content: center;
                align-items: center;
                transform: translateX(100%);
                transition: transform 0.5s ease-in-out;
                z-index: 101;
                margin: 0;
                /* Reset margin for mobile */
            }

            nav.active {
                transform: translateX(0);
            }

            nav ul {
                flex-direction: column;
                gap: 3rem;
                text-align: center;
            }

            nav a {
                font-size: 1.5rem;
            }

            .catalog-container {
                margin-top: 100px;
            }
        }

        /* Lenis Recommended CSS */
        html.lenis {
            height: auto;
        }

        .lenis.lenis-smooth {
            scroll-behavior: auto;
        }

        .lenis.lenis-smooth [data-lenis-prevent] {
            overscroll-behavior: contain;
        }

        .lenis.lenis-stopped {
            overflow: hidden;
        }

        .lenis.lenis-scrolling iframe {
            pointer-events: none;
        }

        /* Cart Icon Styles */
        .header-actions {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .cart-icon-container {
            position: relative;
            cursor: pointer;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-icon {
            width: 24px;
            height: 24px;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            transition: stroke 0.3s;
        }

        .cart-icon-container:hover .cart-icon {
            stroke: #D4AF37;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #D4AF37;
            color: #000;
            font-size: 0.7rem;
            font-weight: bold;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .cart-count.visible {
            opacity: 1;
        }

        .user-controls {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            border: 1px solid #333;
            padding: 0.6rem 1.2rem;
            transition: border-color 0.3s;
        }

        .user-controls:hover {
            border-color: #D4AF37;
        }

        .account-link {
            color: #fff;
            text-decoration: none;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.1em;
            transition: color 0.3s;
        }

        .account-link:hover {
            color: #D4AF37;
        }

        /* Login Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.active {
            display: flex;
        }

        .login-modal {
            background-color: #111;
            border: 1px solid #333;
            padding: 2rem;
            width: 100%;
            max-width: 400px;
            position: relative;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            color: #888;
            cursor: pointer;
            font-size: 1.5rem;
            line-height: 1;
        }

        .modal-close:hover {
            color: #fff;
        }

        .modal-title {
            color: #D4AF37;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: #aaa;
            font-size: 0.9rem;
        }

        .form-input {
            width: 100%;
            padding: 0.8rem;
            background-color: #000;
            border: 1px solid #333;
            color: #fff;
            font-family: inherit;
            box-sizing: border-box;
        }

        .form-input:focus {
            outline: none;
            border-color: #D4AF37;
        }

        .submit-btn {
            width: 100%;
            padding: 1rem;
            background-color: #D4AF37;
            color: #000;
            border: none;
            text-transform: uppercase;
            font-weight: bold;
            letter-spacing: 0.1em;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1rem;
        }

        .submit-btn:hover {
            background-color: #fff;
        }

        .switch-form {
            margin-top: 1.5rem;
            text-align: center;
            font-size: 0.9rem;
            color: #888;
        }

        .switch-link {
            color: #D4AF37;
            text-decoration: underline;
            cursor: pointer;
        }

        /* Cart Drawer Styles */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 100%;
            max-width: 400px;
            height: 100vh;
            background-color: #111;
            border-left: 1px solid #333;
            z-index: 2000;
            transition: right 0.4s ease-in-out;
            display: flex;
            flex-direction: column;
            box-shadow: -5px 0 30px rgba(0, 0, 0, 0.5);
        }

        .cart-sidebar.active {
            right: 0;
        }

        .cart-header {
            padding: 1.5rem;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-header h2 {
            margin: 0;
            color: #D4AF37;
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .close-cart {
            color: #fff;
            font-size: 2rem;
            cursor: pointer;
            line-height: 1;
        }

        .close-cart:hover {
            color: #D4AF37;
        }

        .cart-items {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
        }

        .empty-cart-msg {
            color: #888;
            text-align: center;
            margin-top: 2rem;
        }

        .cart-footer {
            padding: 1.5rem;
            border-top: 1px solid #333;
            background-color: #0a0a0a;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .checkout-btn {
            width: 100%;
            padding: 1rem;
            background-color: #D4AF37;
            color: #000;
            border: none;
            text-transform: uppercase;
            font-weight: bold;
            letter-spacing: 0.1em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .checkout-btn:hover {
            background-color: #fff;
        }

        .cart-overlay-bg {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1999;
            backdrop-filter: blur(2px);
        }

        .cart-overlay-bg.active {
            display: block;
        }

        /* Cart Item Styles */
        .cart-item {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #222;
            position: relative;
        }

        .cart-item-img {
            width: 70px;
            height: 70px;
            min-width: 70px;
            background-color: #1a1a1a;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.8rem;
            color: #555;
            border: 1px solid #333;
            border-radius: 4px;
            overflow: hidden;
        }

        .cart-item-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-title {
            color: #fff;
            font-size: 0.9rem;
            margin-bottom: 0.3rem;
            padding-right: 1.5rem;
            /* Space for remove button */
        }

        .cart-item-variant {
            color: #888;
            font-size: 0.8rem;
            margin-bottom: 0.3rem;
        }

        .cart-item-price {
            color: #D4AF37;
            font-size: 0.9rem;
        }

        .cart-item-remove {
            color: #555;
            cursor: pointer;
            font-size: 1.2rem;
            position: absolute;
            top: 0;
            right: 0;
            line-height: 1;
        }

        .cart-item-remove:hover {
            color: #fff;
        }

        /* Quantity Controls */
        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .qty-btn {
            width: 28px;
            height: 28px;
            border: 1px solid #444;
            background: transparent;
            color: #fff;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }

        .qty-btn:hover {
            border-color: #D4AF37;
            color: #D4AF37;
        }

        .qty-value {
            min-width: 24px;
            text-align: center;
            font-size: 0.95rem;
            color: #fff;
        }

        /* Dropdown Filter Styles */
        .dropdown-filters {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            padding: 0 1rem;
            width: 100%;
            box-sizing: border-box;
        }

        .filter-dropdown {
            position: relative;
        }

        .filter-dropdown-btn {
            padding: 0.7rem 1.5rem;
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid #333;
            color: #fff;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 25px;
            font-family: inherit;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-dropdown-btn:hover {
            border-color: #D4AF37;
            color: #D4AF37;
        }

        .filter-dropdown-btn.active {
            border-color: #D4AF37;
            color: #D4AF37;
        }

        .filter-dropdown-btn svg {
            width: 12px;
            height: 12px;
            transition: transform 0.3s;
        }

        .filter-dropdown.open .filter-dropdown-btn svg {
            transform: rotate(180deg);
        }

        .filter-dropdown-menu {
            position: absolute;
            top: calc(100% + 8px);
            left: 50%;
            transform: translateX(-50%);
            background: #111;
            border: 1px solid #333;
            border-radius: 12px;
            min-width: 200px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .filter-dropdown.open .filter-dropdown-menu {
            opacity: 1;
            visibility: visible;
        }

        .filter-dropdown-menu::-webkit-scrollbar {
            width: 6px;
        }

        .filter-dropdown-menu::-webkit-scrollbar-track {
            background: #222;
        }

        .filter-dropdown-menu::-webkit-scrollbar-thumb {
            background: #D4AF37;
            border-radius: 3px;
        }

        .filter-option {
            padding: 0.8rem 1.2rem;
            color: #aaa;
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 1px solid #222;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-option:last-child {
            border-bottom: none;
        }

        .filter-option:hover {
            background: rgba(212, 175, 55, 0.1);
            color: #D4AF37;
        }

        .filter-option.selected {
            background: rgba(212, 175, 55, 0.15);
            color: #D4AF37;
        }

        .filter-option input[type="checkbox"] {
            appearance: none;
            width: 16px;
            height: 16px;
            border: 1px solid #555;
            border-radius: 3px;
            cursor: pointer;
            position: relative;
        }

        .filter-option input[type="checkbox"]:checked {
            background: #D4AF37;
            border-color: #D4AF37;
        }

        .filter-option input[type="checkbox"]:checked::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #000;
            font-size: 10px;
            font-weight: bold;
        }

        .clear-filters-btn {
            padding: 0.7rem 1.5rem;
            background: transparent;
            border: 1px solid #D4AF37;
            color: #D4AF37;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 25px;
            font-family: inherit;
            display: none;
        }

        .clear-filters-btn.visible {
            display: inline-flex;
            opacity: 1;
        }

        .clear-filters-btn:hover {
            background: #D4AF37;
            color: #000;
        }

        .active-filters-count {
            background: #D4AF37;
            color: #000;
            font-size: 0.7rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }

        /* Mobile Filter Drawer */
        .mobile-filter-toggle {
            display: none;
            width: 100%;
            padding: 1rem;
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid #333;
            color: #fff;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 12px;
            margin-bottom: 1rem;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            font-family: inherit;
        }

        .mobile-filter-toggle svg {
            width: 20px;
            height: 20px;
        }

        .filter-drawer-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            backdrop-filter: blur(3px);
        }

        .filter-drawer-overlay.active {
            display: block;
        }

        .filter-drawer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            max-height: 70vh;
            background: #111;
            border-top: 1px solid #333;
            border-radius: 20px 20px 0 0;
            z-index: 2001;
            transform: translateY(100%);
            transition: transform 0.4s ease;
            overflow-y: auto;
        }

        .filter-drawer.active {
            transform: translateY(0);
        }

        .filter-drawer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid #333;
            position: sticky;
            top: 0;
            background: #111;
            z-index: 1;
        }

        .filter-drawer-title {
            color: #D4AF37;
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .filter-drawer-close {
            color: #fff;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        .filter-drawer-content {
            padding: 1rem;
        }

        .filter-section {
            margin-bottom: 1.5rem;
        }

        .filter-section-title {
            color: #fff;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #333;
        }

        .filter-section-options {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .filter-chip {
            padding: 0.6rem 1rem;
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid #333;
            color: #aaa;
            font-size: 0.8rem;
            cursor: pointer;
            border-radius: 20px;
            transition: all 0.2s;
        }

        .filter-chip.selected {
            background: #D4AF37;
            border-color: #D4AF37;
            color: #000;
        }

        .filter-drawer-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid #333;
            display: flex;
            gap: 1rem;
            position: sticky;
            bottom: 0;
            background: #111;
        }

        .filter-drawer-btn {
            flex: 1;
            padding: 1rem;
            border-radius: 25px;
            font-size: 0.9rem;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
        }

        .filter-drawer-btn.secondary {
            background: transparent;
            border: 1px solid #555;
            color: #888;
        }

        .filter-drawer-btn.primary {
            background: #D4AF37;
            border: none;
            color: #000;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .dropdown-filters {
                display: none;
            }

            .mobile-filter-toggle {
                display: flex;
            }
        }

        /* Pagination Styles */
        .product-card.hidden {
            display: none !important;
        }

        .pagination-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 50px;
            gap: 20px;
            padding-bottom: 50px;
        }

        .pagination-arrow {
            background: rgba(20, 20, 20, 0.5);
            border: 1px solid #D4AF37;
            color: #D4AF37;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.3s;
        }

        .pagination-arrow:hover {
            background: #D4AF37;
            color: #000;
            transform: scale(1.1);
        }

        .pagination-arrow.disabled {
            opacity: 0.3;
            pointer-events: none;
            border-color: #555;
            color: #555;
        }

        /* Search Bar Styles */
        .search-container {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }

        .search-wrapper {
            position: relative;
            width: 100%;
            max-width: 500px;
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            color: #888;
            pointer-events: none;
        }

        .search-input {
            width: 100%;
            padding: 15px 45px 15px 50px;
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid #333;
            box-sizing: border-box;
            border-radius: 30px;
            color: #fff;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .search-input::placeholder {
            color: #666;
        }

        .search-input:focus {
            outline: none;
            border-color: #D4AF37;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.2);
        }

        .search-clear {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #888;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            line-height: 1;
            transition: color 0.3s;
        }

        .search-clear:hover {
            color: #D4AF37;
        }

        @media (max-width: 768px) {
            .search-container {
                padding: 0 1rem;
                box-sizing: border-box;
            }

            .search-wrapper {
                max-width: 100%;
                margin: 0;
                box-sizing: border-box;
            }

            .search-input {
                padding: 12px 40px 12px 45px;
                font-size: 0.9rem;
                box-sizing: border-box;
                width: 100%;
            }
        }
    </style>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        // Initialize EmailJS immediately after library loads
        (function () {
            emailjs.init("CqUzROM1kCqA67-aR");
            console.log("EmailJS initialized successfully");
        })();
    </script>
</head>

<body>

    <header>
        <a href="index.html"><img src="logo.png" alt="Perfumichi Logo" class="logo-img"></a>
        <nav id="mobile-nav">
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="catalogo.html">Catálogo</a></li>
                <li><a href="nicho.html" style="color: #D4AF37; opacity: 1;">Luxury Parfums</a></li>
                <li><a href="woman.html">Woman</a></li>
                <li><a href="politicas.html">Políticas</a></li>
                <li><a href="#" class="nav-account-link" onclick="toggleLoginBubble(event)">Cuenta</a></li>
            </ul>
        </nav>
        <div class="header-actions">
            <div class="cart-icon-container" onclick="toggleCart()">
                <svg class="cart-icon" viewBox="0 0 24 24">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
                <span class="cart-count">0</span>
            </div>
            <div class="hamburger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </header>

    <div class="catalog-container">
        <h1>Luxury Parfums</h1>

        <!-- Mobile Filter Toggle -->
        <button class="mobile-filter-toggle" onclick="openFilterDrawer()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="4" y1="21" x2="4" y2="14"></line>
                <line x1="4" y1="10" x2="4" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12" y2="3"></line>
                <line x1="20" y1="21" x2="20" y2="16"></line>
                <line x1="20" y1="12" x2="20" y2="3"></line>
                <line x1="1" y1="14" x2="7" y2="14"></line>
                <line x1="9" y1="8" x2="15" y2="8"></line>
                <line x1="17" y1="16" x2="23" y2="16"></line>
            </svg>
            Filtros
            <span class="active-filters-count" id="mobileFilterCount" style="display: none;">0</span>
        </button>

        <!-- Desktop Dropdown Filters -->
        <div class="dropdown-filters">
            <!-- Price Filter -->
            <div class="filter-dropdown" id="priceDropdown">
                <button class="filter-dropdown-btn" onclick="toggleDropdown('priceDropdown')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        style="width: 16px; height: 16px;">
                        <circle cx="12" cy="12" r="10"></circle>
                        <path d="M12 6v12M9 9.5c0 1.38 1.34 2.5 3 2.5s3 1.12 3 2.5-1.34 2.5-3 2.5"></path>
                    </svg>
                    Precio
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
                <div class="filter-dropdown-menu">
                    <div class="filter-option" data-price="0-10" onclick="selectPriceFilter(this)">
                        <input type="checkbox"> Hasta 10€
                    </div>
                    <div class="filter-option" data-price="10-20" onclick="selectPriceFilter(this)">
                        <input type="checkbox"> 10€ - 20€
                    </div>
                    <div class="filter-option" data-price="20-30" onclick="selectPriceFilter(this)">
                        <input type="checkbox"> 20€ - 30€
                    </div>
                    <div class="filter-option" data-price="30-50" onclick="selectPriceFilter(this)">
                        <input type="checkbox"> 30€ - 50€
                    </div>
                    <div class="filter-option" data-price="50+" onclick="selectPriceFilter(this)">
                        <input type="checkbox"> Más de 50€
                    </div>
                </div>
            </div>

            <!-- Brand Filter -->
            <div class="filter-dropdown" id="brandDropdown">
                <button class="filter-dropdown-btn" onclick="toggleDropdown('brandDropdown')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        style="width: 16px; height: 16px;">
                        <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
                        <line x1="7" y1="7" x2="7.01" y2="7"></line>
                    </svg>
                    Marca
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
                <div class="filter-dropdown-menu" id="brandMenu" data-lenis-prevent>
                    <!-- Brands will be populated dynamically -->
                </div>
            </div>

            <!-- Sort Filter -->
            <div class="filter-dropdown" id="sortDropdown">
                <button class="filter-dropdown-btn" onclick="toggleDropdown('sortDropdown')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        style="width: 16px; height: 16px;">
                        <line x1="4" y1="9" x2="20" y2="9"></line>
                        <line x1="4" y1="15" x2="14" y2="15"></line>
                        <line x1="4" y1="21" x2="8" y2="21"></line>
                    </svg>
                    Ordenar
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
                <div class="filter-dropdown-menu">
                    <div class="filter-option selected" data-sort="price-desc" onclick="selectSortFilter(this)">
                        Precio: Mayor a Menor
                    </div>
                    <div class="filter-option" data-sort="price-asc" onclick="selectSortFilter(this)">
                        Precio: Menor a Mayor
                    </div>
                    <div class="filter-option" data-sort="name-asc" onclick="selectSortFilter(this)">
                        Nombre: A-Z
                    </div>
                    <div class="filter-option" data-sort="name-desc" onclick="selectSortFilter(this)">
                        Nombre: Z-A
                    </div>
                </div>
            </div>

            <!-- Clear Filters Button -->
            <button class="clear-filters-btn" id="clearFiltersBtn" onclick="clearAllFilters()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    style="width: 14px; height: 14px;">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
                Limpiar filtros
            </button>
        </div>

        <!-- Search Bar -->
        <div class="search-container">
            <div class="search-wrapper">
                <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                </svg>
                <input type="text" id="searchInput" class="search-input" placeholder="Buscar perfume...">
                <button class="search-clear" id="searchClear" style="display: none;">&times;</button>
            </div>
        </div>

        <div class="product-grid">
            <a href="producto.html?id=blue-sapphire&name=BTV%20Blue%20Sapphire%20Supercharged&brand=Boadicea%20The%20Victorious&price3ml=48,99&price5ml=77,95&price10ml=149,90&img=fotos/boadicea-1.jpg&desc=C%C3%BAspide%20del%20lujo%20real%20con%20maderas%20preciosas%20y%20destellos%20c%C3%ADtricos.%20Versi%C3%B3n%20vibrante%20con%20vitalidad%20aldeh%C3%ADdica%20y%20estela%20kilom%C3%A9trica.&notasSalida=Naranja%2C%20Lim%C3%B3n%2C%20Aldeh%C3%ADdos&notasCorazon=Rosa%2C%20Cardamomo%2C%20Jasm%C3%ADn%2C%20Pimienta&notasFondo=Oud%20Camboyano%2C%20Ambar%2C%20Patchul%C3%AD"
                class="product-card">
                <img src="fotos/boadicea-1.jpg" alt="Supercharged Blue Sapphire" class="product-image">
                <div class="product-brand">Boadicea The Victorious</div>
                <div class="product-title">Supercharged Blue Sapphire</div>
                <div class="product-price">Desde 48,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=hanuman&name=BTV%20Hanuman&brand=Boadicea%20The%20Victorious&price3ml=46,99&price5ml=74,95&price10ml=143,90&img=fotos/btvanhuman.png&desc=Tributo%20a%20la%20deidad%20mono%20con%20flor%20de%20naranjo%20y%20magnolia.%20Una%20%22limpieza%20de%20lujo%22%20et%C3%A9rea%2C%20vibrante%20y%20de%20incre%C3%ADble%20persistencia.&notasSalida=Lim%C3%B3n%2C%20Bergamota%2C%20Flor%20de%20Azahar&notasCorazon=Neroli%2C%20Magnolia%2C%20Ciclamen&notasFondo=Vetiver%2C%20Almizcle%2C%20S%C3%A1ndalo%2C%20Ambar"
                class="product-card">
                <img src="fotos/btvanhuman.png" alt="Hanuman" class="product-image">
                <div class="product-brand">Boadicea The Victorious</div>
                <div class="product-title">Hanuman</div>
                <div class="product-price">Desde 46,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=opal&name=BTV%20Opal&brand=Boadicea%20The%20Victorious&price3ml=46,99&price5ml=74,95&price10ml=143,90&img=fotos/btvopal.png&desc=Captura%20la%20iridiscencia%20con%20flores%20delicadas%20sobre%20resinas%20c%C3%A1lidas.%20Textura%20sedosa%20de%20segunda%20piel%20con%20ylang-ylang%20y%20almizcles.&notasSalida=Ylang-ylang%2C%20Bergamota&notasCorazon=Rosa%20turca%2C%20Jasm%C3%ADn%20Sambac&notasFondo=Ambar%2C%20S%C3%A1ndalo%2C%20Almizcle%2C%20Vainilla"
                class="product-card">
                <img src="fotos/btvopal.png" alt="Opal" class="product-image">
                <div class="product-brand">Boadicea</div>
                <div class="product-title">Opal</div>
                <div class="product-price">Desde 46,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=blonde-amber&name=Clive%20Christian%20Blonde%20Amber&brand=Clive%20Christian&price3ml=45,99&price5ml=73,95&price10ml=141,90&img=fotos/clive-christian_blonde-amber.png&desc=Tributo%20al%20Art%20D%C3%A9co%2C%20c%C3%A1lido%20y%20embriagador%20con%20tabaco%20rubio%20y%20frutas%20secas.%20Evoca%20resinas%20antiguas%20y%20maderas%20pulidas%20con%20sofisticaci%C3%B3n.&notasSalida=Naranja%20amarga%2C%20Jengibre%2C%20Ron%2C%20Cardamomo&notasCorazon=Tabaco%20rubio%2C%20Orris%2C%20S%C3%A1ndalo%2C%20Nardos&notasFondo=Vetiver%2C%20Mirra%2C%20Pachuli%2C%20Haba%20Tonka"
                class="product-card">
                <img src="fotos/clive-christian_blonde-amber.png" alt="Blonde Amber" class="product-image">
                <div class="product-brand">Clive Christian</div>
                <div class="product-title">Blonde Amber</div>
                <div class="product-price">Desde 45,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=hedonistic&name=Clive%20Christian%20Hedonistic&brand=Clive%20Christian&price3ml=45,99&price5ml=73,95&price10ml=141,90&img=fotos/clive-crhistian-hadonistic.png&desc=Incita%20al%20placer%20sensorial%20con%20apertura%20c%C3%ADtrica%20y%20coraz%C3%B3n%20oscuro%20de%20cuero.%20Contraste%20seductor%20entre%20brillo%20energ%C3%A9tico%20y%20fondo%20narc%C3%B3tico.&notasSalida=Bergamota%2C%20Pomelo%2C%20Neroli&notasCorazon=Cereza%20negra%2C%20Salvia%2C%20Tabaco&notasFondo=Ambar%2C%20Cuero%2C%20L%C3%A1dano%2C%20Musgo"
                class="product-card">
                <img src="fotos/clive-crhistian-hadonistic.png" alt="Addictive Arts Hedonistic" class="product-image">
                <div class="product-brand">Clive Christian</div>
                <div class="product-title">Hedonistic</div>
                <div class="product-price">Desde 45,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=rock-rose&name=Clive%20Christian%20Rock%20Rose&brand=Clive%20Christian&price3ml=45,99&price5ml=73,95&price10ml=141,90&img=fotos/clivecristhianrockrose.png&desc=Foug%C3%A8re%20moderno%20donde%20la%20jara%20aporta%20calidez%20resinosa%20a%20estructura%20fresca.%20Proyecta%20autoridad%20y%20distinci%C3%B3n%20brit%C3%A1nica.&notasSalida=Bergamota%2C%20Pimienta%20negra%2C%20Neroli&notasCorazon=Lavanda%2C%20Violeta%2C%20Rock%20rose%20(Jara)&notasFondo=Cacao%2C%20Pachuli%2C%20Ambar%2C%20Vetiver"
                class="product-card">
                <img src="fotos/clivecristhianrockrose.png" alt="Rock Rose" class="product-image">
                <div class="product-brand">Clive Christian</div>
                <div class="product-title">Rock Rose</div>
                <div class="product-price">Desde 45,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=x-masculine&name=Clive%20X%20Masculine&brand=Clive%20Christian&price3ml=45,99&price5ml=73,95&price10ml=141,90&img=fotos/clive-crhistian-xmasculine.png&desc=Legendario%20por%20su%20complejidad%20especiada%20de%20canela%2C%20iris%20y%20maderas.%20Equilibra%20calidez%20picante%20con%20frescura%20estructural%20magistral.&notasSalida=Ruibarbo%2C%20Pi%C3%B1a%2C%20Bergamota&notasCorazon=Iris%2C%20Piment%C3%B3n%2C%20Jasm%C3%ADn&notasFondo=Cedro%2C%20Canela%2C%20Ambar%2C%20Musgo%20de%20roble%2C%20Vetiver"
                class="product-card">
                <img src="fotos/clive-crhistian-xmasculine.png" alt="X Masculine" class="product-image">
                <div class="product-brand">Clive Christian</div>
                <div class="product-title">X Masculine</div>
                <div class="product-price">Desde 45,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=nefs&name=Nishane%20Nefs&brand=Nishane&price3ml=44,99&price5ml=72,95&price10ml=138,90&img=fotos/nisane-nefs.png&desc=Oriental%20lujoso%20que%20redefine%20la%20opulencia%20con%20miel%2C%20oud%20y%20whisky.%20Fragancia%20de%20contrastes%20que%20rezuma%20dinero%20y%20exclusividad.&notasSalida=Miel%2C%20Violeta%2C%20Salvia%2C%20Azafr%C3%A1n%2C%20Higo&notasCorazon=Rosa%2C%20Osmanto%2C%20Geranio%2C%20Jasm%C3%ADn%2C%20Nuez%20moscada&notasFondo=Oud%2C%20Vainilla%2C%20Whisky%2C%20Cuero%2C%20Ambar%2C%20Canela"
                class="product-card">
                <img src="fotos/nisane-nefs.png" alt="Nefs" class="product-image">
                <div class="product-brand">Nishane</div>
                <div class="product-title">Nefs</div>
                <div class="product-price">Desde 44,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=isola-blu&name=Roja%20Isola%20Blu&brand=Roja%20Parfums&price3ml=37,99&price5ml=60,95&price10ml=116,90&img=fotos/roja-isola-blu.png&desc=Definici%C3%B3n%20de%20vacaciones%20de%20lujo%2C%20c%C3%ADtrico%20sofisticado%20con%20base%20compleja.%20Captura%20la%20brisa%20marina%20y%20limoneros%20con%20calidad%20inmensa.&notasSalida=Lim%C3%B3n%2C%20Bergamota%2C%20Lima%2C%20Lavanda%2C%20Tomillo&notasCorazon=Manzana%2C%20Grosella%20negra%2C%20Flor%20de%20naranjo%2C%20Coco&notasFondo=Hierba%20mate%2C%20Pimienta%20rosa%2C%20An%C3%ADs%2C%20Pachuli%2C%20%C3%81mbar%20gris"
                class="product-card">
                <img src="fotos/roja-isola-blu.png" alt="Isola Blu" class="product-image">
                <div class="product-brand">Roja Parfums</div>
                <div class="product-title">Isola Blu</div>
                <div class="product-price">Desde 37,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=1872&name=Clive%201872&brand=Clive%20Christian&price3ml=29,99&price5ml=46,95&price10ml=90,90&img=fotos/clive-1872.png&desc=Quintaesencia%20cl%C3%A1sica%20brit%C3%A1nica%2C%20verde%2C%20c%C3%ADtrica%20y%20herb%C3%A1cea.%20Elegancia%20atemporal%20con%20longevidad%20inusual%20en%20su%20perfil%20fresco.&notasSalida=Lima%2C%20Pomelo%2C%20Petitgrain%2C%20Bergamota&notasCorazon=Salvia%2C%20Fresia%2C%20Cempas%C3%BAchil&notasFondo=Cedro%2C%20Pachul%C3%AD%2C%20Almizcle%2C%20Incienso"
                class="product-card">
                <img src="fotos/clive-1872.png" alt="1872 Original Collection" class="product-image">
                <div class="product-brand">Clive Christian</div>
                <div class="product-title">1872 Original</div>
                <div class="product-price">Desde 29,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=oud-wood&name=Tom%20Ford%20Oud%20Wood%20Parfum&brand=Tom%20Ford&price3ml=27,99&price5ml=44,95&price10ml=85,90&img=fotos/tomford-oud-wood.png&desc=Versi%C3%B3n%20intensa%2C%20m%C3%A1s%20rica%2C%20densa%20y%20especiada%20del%20cl%C3%A1sico.%20A%C3%B1ade%20cuerpo%20de%20resinas%20y%20cardamomo%20para%20mayor%20longevidad.&notasSalida=Pimienta%20rosa%2C%20Cardamomo%2C%20Romero&notasCorazon=Oud%2C%20S%C3%A1ndalo%2C%20Vetiver&notasFondo=Haba%20Tonka%2C%20Ambar%2C%20Vainilla"
                class="product-card">
                <img src="fotos/tomford-oud-wood.png" alt="Oud Wood" class="product-image">
                <div class="product-brand">Tom Ford</div>
                <div class="product-title">Oud Wood</div>
                <div class="product-price">Desde 27,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=dionisio&name=Dionisio&brand=Tiziana%20Terenzi&price3ml=24,99&price5ml=41,95&price10ml=79,90&img=fotos/tiziana-terenzi-dioniso-2022.png&desc=Extracto%20de%20perfume%20centrado%20en%20la%20vainilla%20m%C3%A1s%20lujosa%20y%20feromonas.%20Aroma%20narc%C3%B3tico%2C%20dulce%20y%20animal%20con%20una%20duraci%C3%B3n%20eterna.&notasSalida=%C3%81mbar%20gris%2C%20Almizcle%2C%20Feromonas&notasCorazon=Vainilla%20de%20Tahit%C3%AD%2C%20Jazm%C3%ADn&notasFondo=Vainilla%20de%20Madagascar%2C%20Oud%2C%20Almizcle"
                class="product-card">
                <img src="fotos/tiziana-terenzi-dioniso-2022.png" alt="Dionisio" class="product-image">
                <div class="product-brand">Tiziana Terenzi</div>
                <div class="product-title">Dionisio</div>
                <div class="product-price">Desde 24,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=alexandria-ii&name=Xerjoff%20Alexandria%20II&brand=Xerjoff&price3ml=23,99&price5ml=37,95&price10ml=72,90&img=fotos/xerjoff-alexandria-ll.png&desc=Edici%C3%B3n%20conmemorativa%20m%C3%A1s%20ahumada%20y%20rica%20en%20oud%20que%20la%20original.%20Profundiza%20en%20notas%20oscuras%20evocando%20antig%C3%BCedad%20y%20solemnidad.&notasSalida=Lavanda%2C%20Palisandro%2C%20Canela%2C%20Manzana&notasCorazon=Rosa%20b%C3%BAlgara%2C%20Cedro%2C%20Lirio%20de%20los%20valles&notasFondo=Oud%20de%20Laos%2C%20Ambar%2C%20S%C3%A1ndalo%2C%20Vainilla%2C%20Almizcle"
                class="product-card">
                <img src="fotos/xerjoff-alexandria-ll.png" alt="Alexandria II" class="product-image">
                <div class="product-brand">Xerjoff</div>
                <div class="product-title">Alexandria II</div>
                <div class="product-price">Desde 23,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=reflection-45&name=Amouage%20Reflection%2045&brand=Amouage&price3ml=19,99&price5ml=31,95&price10ml=61,90&img=fotos/amouragereflection45.png&desc=Versi%C3%B3n%20extracto%20que%20a%C3%B1ade%20densidad%20resinosa%20y%20especiada%20al%20cl%C3%A1sico%20floral.%20Textura%20oleosa%20y%20rica%20con%20mirra%20y%20opop%C3%B3naco.&notasSalida=Benju%C3%AD%2C%20Pimienta%20rosa%2C%20Salvia%2C%20Lavanda&notasCorazon=Jasm%C3%ADn%2C%20Iris%2C%20Neroli%2C%20Ang%C3%A9lica&notasFondo=S%C3%A1ndalo%2C%20Vetiver%2C%20Pachuli%2C%20Mirra%2C%20Opop%C3%B3naco"
                class="product-card">
                <img src="fotos/amouragereflection45.png" alt="Reflection 45" class="product-image">
                <div class="product-brand">Amouage</div>
                <div class="product-title">Reflection 45</div>
                <div class="product-price">Desde 19,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=outlands&name=Amouage%20Outlands&brand=Amouage&price3ml=17,99&price5ml=27,95&price10ml=52,90&img=fotos/aumage%20outlands.png&desc=Traves%C3%ADa%20ex%C3%B3tica%20de%20contrastes%20con%20especias%20fr%C3%ADas%2C%20resinas%20e%20incienso.%20Perfil%20futurista%20que%20evoca%20paisajes%20inexplorados.&notasSalida=Cardamomo%2C%20Bergamota%2C%20Lim%C3%B3n%2C%20Incienso&notasCorazon=Pachuli%2C%20Azafr%C3%A1n%2C%20Notas%20bals%C3%A1micas&notasFondo=Ambar%2C%20Notas%20amaderadas%2C%20Almizcle"
                class="product-card">
                <img src="fotos/aumage outlands.png" alt="Outlands" class="product-image">
                <div class="product-brand">Amouage</div>
                <div class="product-title">Outlands</div>
                <div class="product-price">Desde 17,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=manhattan&name=Roja%20Manhattan&brand=Roja%20Parfums&price3ml=16,99&price5ml=25,95&price10ml=49,90&img=fotos/rojamanhattam.png&desc=Tributo%20nocturno%20a%20NY%20con%20tabaco%2C%20vainilla%20y%20especias%20vibrantes.%20Captura%20el%20glamour%20art%20deco%20y%20la%20energ%C3%ADa%20de%20la%20ciudad.&notasSalida=Bergamota%2C%20Lavanda%2C%20Albahaca&notasCorazon=Rosa%20de%20mayo%2C%20Jasm%C3%ADn%2C%20Heliotropo%2C%20Coco&notasFondo=Tabaco%2C%20Vainilla%2C%20Pino%2C%20Vetiver%2C%20Almizcle"
                class="product-card">
                <img src="fotos/rojamanhattam.png" alt="Manhattan" class="product-image">
                <div class="product-brand">Roja Parfums</div>
                <div class="product-title">Manhattan</div>
                <div class="product-price">Desde 16,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=harmonious&name=BTV%20Harmonious&brand=Boadicea%20The%20Victorious&price3ml=14,99&price5ml=23,95&price10ml=44,90&img=fotos/btvharmonious.png&desc=Equilibrio%20zen%20de%20maderas%20nobles%2C%20co%C3%B1ac%20y%20azafr%C3%A1n.%20Suavidad%20de%20cachemira%20que%20invita%20a%20la%20intimidad%20con%20presencia%20magn%C3%A9tica.&notasSalida=Bergamota%2C%20Azafr%C3%A1n%2C%20Ron%2C%20Co%C3%B1ac&notasCorazon=Rosa%20de%20mayo%2C%20Madera%20de%20Cachemira%2C%20Orris&notasFondo=S%C3%A1ndalo%2C%20Almizcle%2C%20Ambar%2C%20Cuero"
                class="product-card">
                <img src="fotos/btvharmonious.png" alt="Harmonious" class="product-image">
                <div class="product-brand">Boadicea</div>
                <div class="product-title">Harmonious</div>
                <div class="product-price">Desde 14,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=absolu-aventus&name=Creed%20Absolu%20Aventus&brand=Creed&price3ml=13,99&price5ml=22,95&price10ml=42,90&img=fotos/creed-absolu-aventus.png&desc=Edici%C3%B3n%20limitada%20m%C3%A1s%20oscura%20y%20madura%20con%20%C3%A9nfasis%20en%20pomelo%20y%20especias.%20Perfil%20seco%20y%20nocturno%20para%20amantes%20del%20estilo%20vintage.&notasSalida=Bergamota%2C%20Grosella%20negra%2C%20Pomelo&notasCorazon=Jengibre%2C%20Canela%2C%20Cardamomo%2C%20Cidra&notasFondo=Pimienta%20rosa%2C%20Pachul%C3%AD%2C%20Vetiver"
                class="product-card">
                <img src="fotos/creed-absolu-aventus.png" alt="Absolu Aventus" class="product-image">
                <div class="product-brand">Creed</div>
                <div class="product-title">Absolu Aventus</div>
                <div class="product-price">Desde 13,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=ombre-nomade&name=LV%20Ombre%20Nomade&brand=Louis%20Vuitton&price3ml=11,99&price5ml=19,95&price10ml=36,90&img=fotos/LVombrenomade.png&desc=Tit%C3%A1n%20del%20oud%20moderno%2C%20oscuro%2C%20ahumado%20y%20con%20frambuesa.%20Estela%20kilom%C3%A9trica%20que%20define%20el%20%22olor%20a%20riqueza%22%20contempor%C3%A1neo.&notasSalida=Frambuesa%2C%20Geranio&notasCorazon=Rosa%2C%20Azafr%C3%A1n&notasFondo=Oud%2C%20Benju%C3%AD%2C%20Incienso%2C%20Madera%20de%20%C3%A1mbar%2C%20Abedul"
                class="product-card">
                <img src="fotos/LVombrenomade.png" alt="Ombre Nomade" class="product-image">
                <div class="product-brand">Louis Vuitton</div>
                <div class="product-title">Ombre Nomade</div>
                <div class="product-price">Desde 11,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>

            <a href="producto.html?id=centaurus&name=Creed%20Centaurus&brand=Creed&price3ml=9,99&price5ml=15,95&price10ml=29,90&img=fotos/creed-centaurus.png&desc=Nueva%20direcci%C3%B3n%20oriental%20de%20la%20marca%2C%20c%C3%A1lida%20y%20especiada.%20Explora%20territorios%20de%20tabaco%20y%20resinas%20evocando%20fuerza%20mitol%C3%B3gica.&notasSalida=Especias%2C%20Tabaco&notasCorazon=Maderas%2C%20Resinas&notasFondo=Ambar%2C%20Vainilla%2C%20Cuero"
                class="product-card">
                <img src="fotos/creed-centaurus.png" alt="Centaurus" class="product-image">
                <div class="product-brand">Creed</div>
                <div class="product-title">Centaurus</div>
                <div class="product-price">Desde 9,99€</div>
                <span class="add-btn">Ver Detalles</span>
            </a>
        </div>
    </div>

    <!-- Cart Drawer -->
    <div class="cart-overlay-bg" id="cartOverlay" onclick="toggleCart()"></div>
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h2>Tu Cesta</h2>
            <span class="close-cart" onclick="toggleCart()">&times;</span>
        </div>
        <div class="cart-items">
            <!-- Example Item (Hidden by default, logic can be added later) -->
            <p class="empty-cart-msg">Tu cesta está vacía.</p>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span>0.00€</span>
            </div>
            <button class="checkout-btn" onclick="checkout()">Tramitar Pedido</button>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal-overlay" id="loginModal">
        <div class="login-modal">
            <span class="modal-close" onclick="closeLoginModal()">&times;</span>
            <h2 class="modal-title" id="modalTitle">Iniciar Sesión</h2>

            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" placeholder="tu@email.com">
                </div>
                <div class="form-group">
                    <label class="form-label">Contraseña</label>
                    <input type="password" class="form-input" placeholder="••••••••">
                </div>
                <button type="submit" class="submit-btn">Entrar</button>
                <div class="switch-form">
                    ¿No tienes cuenta? <span class="switch-link" onclick="toggleFormMode()">Regístrate</span>
                </div>
            </form>

            <form id="registerForm" style="display: none;">
                <div class="form-group">
                    <label class="form-label">Nombre</label>
                    <input type="text" class="form-input" placeholder="Tu nombre">
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" placeholder="tu@email.com">
                </div>
                <div class="form-group">
                    <label class="form-label">Contraseña</label>
                    <input type="password" class="form-input" placeholder="••••••••">
                </div>
                <button type="submit" class="submit-btn">Crear Cuenta</button>
                <div class="switch-form">
                    ¿Ya tienes cuenta? <span class="switch-link" onclick="toggleFormMode()">Inicia Sesión</span>
                </div>
            </form>
        </div>
    </div>

    <!-- Lenis for Smooth Scroll -->
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.29/bundled/lenis.min.js"></script>
    <script>
        const lenis = new Lenis({
            duration: 1.5,
            easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
            smooth: true
        });
        function raf(time) {
            lenis.raf(time);
            requestAnimationFrame(raf);
        }
        requestAnimationFrame(raf);

        // Mobile Menu Toggle
        function toggleMenu() {
            const nav = document.getElementById('mobile-nav');
            const hamburger = document.querySelector('.hamburger');
            nav.classList.toggle('active');
            hamburger.classList.toggle('active');
        }

        // --- MOBILE MENU TOGGLE ---
        function toggleMenu() {
            const nav = document.getElementById('mobile-nav');
            const hamburger = document.querySelector('.hamburger');
            nav.classList.toggle('active');
            hamburger.classList.toggle('active');
        }

        // Login Modal Logic
        const modal = document.getElementById('loginModal');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const modalTitle = document.getElementById('modalTitle');

        function openLoginModal(e) {
            e.preventDefault();
            modal.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent scrolling
        }

        function closeLoginModal() {
            modal.classList.remove('active');
            document.body.style.overflow = ''; // Restore scrolling
        }

        function toggleFormMode() {
            if (loginForm.style.display === 'none') {
                loginForm.style.display = 'block';
                registerForm.style.display = 'none';
                modalTitle.textContent = 'Iniciar Sesión';
            } else {
                loginForm.style.display = 'none';
                registerForm.style.display = 'block';
                modalTitle.textContent = 'Crear Cuenta';
            }
        }

        // Close modal when clicking outside
        if (modal) {
            modal.addEventListener('click', function (e) {
                if (e.target === modal) {
                    closeLoginModal();
                }
            });
        }
    </script>

    <!-- CART LOGIC -->
    <script type="module" src="js/cart.js"></script>

    <!-- LOGIN BUBBLE -->
    <div id="login-bubble" class="login-bubble hidden">
        <div class="bubble-arrow"></div>
        <div class="bubble-content">
            <h3 id="bubble-title">Iniciar Sesión</h3>

            <!-- Login Form -->
            <form id="bubble-login-form" onsubmit="handleBubbleLogin(event)">
                <div class="bubble-input-group">
                    <input type="email" id="bubble-email" placeholder="Email" required>
                </div>
                <div class="bubble-input-group">
                    <input type="password" id="bubble-password" placeholder="Contraseña" required>
                </div>
                <button type="submit" class="bubble-btn">ENTRAR</button>
            </form>

            <!-- Register Form (Hidden by default) -->
            <form id="bubble-register-form" class="hidden" onsubmit="handleBubbleRegister(event)">
                <div class="bubble-input-group">
                    <input type="text" id="bubble-reg-name" placeholder="Nombre" required>
                </div>
                <div class="bubble-input-group">
                    <input type="email" id="bubble-reg-email" placeholder="Email" required>
                </div>
                <div class="bubble-input-group">
                    <input type="password" id="bubble-reg-password" placeholder="Contraseña" required>
                </div>
                <button type="submit" class="bubble-btn">REGISTRARSE</button>
            </form>

            <div class="bubble-divider">O</div>

            <button class="bubble-google-btn" onclick="handleBubbleGoogleLogin()">
                <svg width="14" height="14" viewBox="0 0 18 18">
                    <path
                        d="M17.64 9.2c0-.637-.057-1.252-.164-1.841H9v3.481h4.844a4.14 4.14 0 0 1-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z"
                        fill="#4285F4"></path>
                    <path
                        d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.715H.957v2.332A8.997 8.997 0 0 0 9 18z"
                        fill="#34A853"></path>
                    <path
                        d="M3.964 10.71A5.41 5.41 0 0 1 3.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.996 8.996 0 0 0 0 9c0 1.452.348 2.827.957 4.042l3.007-2.332z"
                        fill="#FBBC05"></path>
                    <path
                        d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 0 0 .957 4.958L3.964 7.29C4.672 5.159 6.656 3.58 9 3.58z"
                        fill="#EA4335"></path>
                </svg>
                Google
            </button>

            <p class="bubble-switch-text">
                <span id="bubble-switch-msg">¿No tienes cuenta?</span>
                <span id="bubble-switch-action" onclick="toggleBubbleForm()">Regístrate</span>
            </p>
        </div>
    </div>

    <link rel="stylesheet" href="css/auth.css">

    <!-- FIREBASE SDK & LOGIC -->
    <script type="module" src="js/auth.js"></script>



    <!-- Header hide on scroll -->
    <script>
        (function () {
            const header = document.querySelector('header');
            let lastScrollY = window.scrollY;
            let ticking = false;

            function updateHeader() {
                const currentScrollY = window.scrollY;

                if (currentScrollY > lastScrollY && currentScrollY > 100) {
                    header.classList.add('header-hidden');
                } else {
                    header.classList.remove('header-hidden');
                }

                lastScrollY = currentScrollY;
                ticking = false;
            }

            window.addEventListener('scroll', function () {
                if (!ticking) {
                    requestAnimationFrame(updateHeader);
                    ticking = true;
                }
            });
        })();
    </script>
    <!-- Pagination Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- PAGINATION LOGIC ---
            const products = Array.from(document.querySelectorAll('.product-card'));
            const itemsPerPage = 12; // 12 items per page
            let currentPage = 1;

            const grid = document.querySelector('.product-grid');
            if (grid && products.length > 0) {
                const paginationContainer = document.createElement('div');
                paginationContainer.className = 'pagination-controls';

                // Previous Arrow
                const prevBtn = document.createElement('div');
                prevBtn.className = 'pagination-arrow';
                prevBtn.innerHTML = '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>';
                prevBtn.onclick = () => changePage(-1);

                // Next Arrow
                const nextBtn = document.createElement('div');
                nextBtn.className = 'pagination-arrow';
                nextBtn.innerHTML = '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>';
                nextBtn.onclick = () => changePage(1);

                paginationContainer.appendChild(prevBtn);
                paginationContainer.appendChild(nextBtn);

                // Insert after grid
                grid.parentNode.insertBefore(paginationContainer, grid.nextSibling);

                function updatePagination() {
                    const totalPages = Math.ceil(products.length / itemsPerPage);

                    if (currentPage < 1) currentPage = 1;
                    if (currentPage > totalPages && totalPages > 0) currentPage = totalPages;

                    const start = (currentPage - 1) * itemsPerPage;
                    const end = start + itemsPerPage;

                    // Hide ALL
                    products.forEach(p => p.classList.add('hidden'));

                    // Show Slice
                    const productsToShow = products.slice(start, end);
                    productsToShow.forEach(p => p.classList.remove('hidden'));

                    // Update UI
                    if (currentPage === 1) prevBtn.classList.add('disabled');
                    else prevBtn.classList.remove('disabled');

                    if (currentPage >= totalPages) nextBtn.classList.add('disabled');
                    else nextBtn.classList.remove('disabled');

                    paginationContainer.style.display = totalPages <= 1 ? 'none' : 'flex';
                }

                function changePage(direction) {
                    currentPage += direction;
                    updatePagination();
                    setTimeout(() => {
                        if (typeof lenis !== 'undefined') {
                            lenis.scrollTo(0, { immediate: false });
                        } else {
                            window.scrollTo({ top: 0, behavior: 'smooth' });
                        }
                    }, 50);
                }

                function applySearch(query) {
                    currentPage = 1;
                    const searchLower = query.toLowerCase();

                    if (query) {
                        visibleProducts = products.filter(p => {
                            const title = p.querySelector('.product-title')?.textContent?.toLowerCase() || '';
                            const brand = p.querySelector('.product-brand')?.textContent?.toLowerCase() || '';
                            return title.includes(searchLower) || brand.includes(searchLower);
                        });
                    } else {
                        visibleProducts = products;
                    }

                    updatePaginationWithSearch();
                }

                function updatePaginationWithSearch() {
                    const totalPages = Math.ceil(visibleProducts.length / itemsPerPage);

                    if (currentPage < 1) currentPage = 1;
                    if (currentPage > totalPages && totalPages > 0) currentPage = totalPages;

                    const start = (currentPage - 1) * itemsPerPage;
                    const end = start + itemsPerPage;

                    products.forEach(p => p.classList.add('hidden'));
                    const productsToShow = visibleProducts.slice(start, end);
                    productsToShow.forEach(p => p.classList.remove('hidden'));

                    if (currentPage === 1) prevBtn.classList.add('disabled');
                    else prevBtn.classList.remove('disabled');

                    if (currentPage >= totalPages) nextBtn.classList.add('disabled');
                    else nextBtn.classList.remove('disabled');

                    paginationContainer.style.display = totalPages <= 1 ? 'none' : 'flex';
                }

                // Search Functionality
                const searchInput = document.getElementById('searchInput');
                const searchClear = document.getElementById('searchClear');
                let visibleProducts = products;

                if (searchInput) {
                    searchInput.addEventListener('input', function () {
                        const query = this.value.trim();
                        searchClear.style.display = query ? 'block' : 'none';
                        applySearch(query);
                    });
                }

                if (searchClear) {
                    searchClear.addEventListener('click', function () {
                        searchInput.value = '';
                        this.style.display = 'none';
                        applySearch('');
                    });
                }

                // Initial Load
                updatePagination();
            }
        });
    </script>
    <!-- Filter System JavaScript -->
    <script>
        // Filter State
        const filterState = {
            prices: [],
            brands: [],
            sort: 'price-desc',
            search: ''
        };

        // Get all products
        function getProducts() {
            return Array.from(document.querySelectorAll('.product-card'));
        }

        // Extract price from product
        function getProductPrice(product) {
            const priceMatch = product.href.match(/price3ml=(\d+),(\d+)/);
            if (priceMatch) {
                return parseFloat(`${priceMatch[1]}.${priceMatch[2]}`);
            }
            const priceText = product.querySelector('.product-price')?.textContent || '';
            const match = priceText.match(/(\d+),(\d+)/);
            return match ? parseFloat(`${match[1]}.${match[2]}`) : 0;
        }

        // Extract brand from product
        function getProductBrand(product) {
            return product.querySelector('.product-brand')?.textContent || '';
        }

        // Extract name from product
        function getProductName(product) {
            return product.querySelector('.product-title')?.textContent || '';
        }

        // Check if product matches price filter
        function matchesPriceFilter(product) {
            if (filterState.prices.length === 0) return true;
            const price = getProductPrice(product);
            return filterState.prices.some(range => {
                if (range === '0-10') return price <= 10;
                if (range === '10-20') return price > 10 && price <= 20;
                if (range === '20-30') return price > 20 && price <= 30;
                if (range === '30-50') return price > 30 && price <= 50;
                if (range === '50+') return price > 50;
                return false;
            });
        }

        // Check if product matches brand filter
        function matchesBrandFilter(product) {
            if (filterState.brands.length === 0) return true;
            const brand = getProductBrand(product).toLowerCase();
            return filterState.brands.some(b => brand.includes(b.toLowerCase()));
        }

        // Check if product matches search
        function matchesSearch(product) {
            if (!filterState.search) return true;
            const name = getProductName(product).toLowerCase();
            const brand = getProductBrand(product).toLowerCase();
            const search = filterState.search.toLowerCase();
            return name.includes(search) || brand.includes(search);
        }

        // Apply all filters
        function applyFilters() {
            const products = getProducts();
            const grid = document.querySelector('.product-grid');

            // Filter products
            products.forEach(product => {
                const matches = matchesPriceFilter(product) &&
                    matchesBrandFilter(product) &&
                    matchesSearch(product);
                product.style.display = matches ? '' : 'none';
            });

            // Sort products
            const visibleProducts = products.filter(p => p.style.display !== 'none');
            visibleProducts.sort((a, b) => {
                switch (filterState.sort) {
                    case 'price-asc':
                        return getProductPrice(a) - getProductPrice(b);
                    case 'price-desc':
                        return getProductPrice(b) - getProductPrice(a);
                    case 'name-asc':
                        return getProductName(a).localeCompare(getProductName(b));
                    case 'name-desc':
                        return getProductName(b).localeCompare(getProductName(a));
                    default:
                        return 0;
                }
            });

            // Reorder in DOM
            visibleProducts.forEach(p => grid.appendChild(p));

            // Update UI
            updateFilterUI();
        }

        // Update filter UI state
        function updateFilterUI() {
            const activeCount = filterState.prices.length + filterState.brands.length +
                (filterState.sort !== 'price-desc' ? 1 : 0);

            const clearBtn = document.getElementById('clearFiltersBtn');
            const mobileCount = document.getElementById('mobileFilterCount');

            if (clearBtn) {
                clearBtn.classList.toggle('visible', activeCount > 0);
            }

            if (mobileCount) {
                mobileCount.style.display = activeCount > 0 ? 'flex' : 'none';
                mobileCount.textContent = activeCount;
            }
        }

        // Toggle dropdown
        function toggleDropdown(id) {
            const dropdown = document.getElementById(id);
            const isOpen = dropdown.classList.contains('open');

            // Close all dropdowns
            document.querySelectorAll('.filter-dropdown').forEach(d => d.classList.remove('open'));

            // Toggle this one
            if (!isOpen) {
                dropdown.classList.add('open');
            }
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.filter-dropdown')) {
                document.querySelectorAll('.filter-dropdown').forEach(d => d.classList.remove('open'));
            }
        });

        // Select price filter
        function selectPriceFilter(element) {
            const price = element.dataset.price;
            const checkbox = element.querySelector('input[type="checkbox"]');
            const isSelected = element.classList.contains('selected');

            if (isSelected) {
                element.classList.remove('selected');
                checkbox.checked = false;
                filterState.prices = filterState.prices.filter(p => p !== price);
            } else {
                element.classList.add('selected');
                checkbox.checked = true;
                filterState.prices.push(price);
            }

            applyFilters();
        }

        // Select sort filter
        function selectSortFilter(element) {
            const sort = element.dataset.sort;

            // Update UI
            element.closest('.filter-dropdown-menu').querySelectorAll('.filter-option').forEach(o => {
                o.classList.remove('selected');
            });
            element.classList.add('selected');

            // Update state
            filterState.sort = sort;
            applyFilters();

            // Close dropdown
            document.querySelectorAll('.filter-dropdown').forEach(d => d.classList.remove('open'));
        }

        // Select brand filter
        function selectBrandFilter(element) {
            const brand = element.dataset.brand;
            const checkbox = element.querySelector('input[type="checkbox"]');
            const isSelected = element.classList.contains('selected');

            if (isSelected) {
                element.classList.remove('selected');
                checkbox.checked = false;
                filterState.brands = filterState.brands.filter(b => b !== brand);
            } else {
                element.classList.add('selected');
                checkbox.checked = true;
                filterState.brands.push(brand);
            }

            applyFilters();
        }

        // Clear all filters
        function clearAllFilters() {
            filterState.prices = [];
            filterState.brands = [];
            filterState.sort = 'price-desc';

            // Reset UI
            document.querySelectorAll('.filter-option').forEach(o => {
                o.classList.remove('selected');
                const checkbox = o.querySelector('input[type="checkbox"]');
                if (checkbox) checkbox.checked = false;
            });

            document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('selected'));

            // Set default sort
            const defaultSort = document.querySelector('.filter-option[data-sort="price-desc"]');
            if (defaultSort) defaultSort.classList.add('selected');

            const defaultMobileSort = document.querySelector('.filter-chip[data-sort="price-desc"]');
            if (defaultMobileSort) defaultMobileSort.classList.add('selected');

            applyFilters();
        }

        // Mobile filter drawer
        function openFilterDrawer() {
            document.getElementById('filterDrawerOverlay').classList.add('active');
            document.getElementById('filterDrawer').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeFilterDrawer() {
            document.getElementById('filterDrawerOverlay').classList.remove('active');
            document.getElementById('filterDrawer').classList.remove('active');
            document.body.style.overflow = '';
        }

        function applyFiltersAndClose() {
            applyFilters();
            closeFilterDrawer();
        }

        // Toggle mobile filter chip
        function toggleMobileFilter(element, type) {
            if (type === 'sort') {
                // Only one sort option can be selected
                document.querySelectorAll('#mobileSortOptions .filter-chip').forEach(c => c.classList.remove('selected'));
                element.classList.add('selected');
                filterState.sort = element.dataset.sort;
            } else if (type === 'price') {
                const price = element.dataset.price;
                if (element.classList.contains('selected')) {
                    element.classList.remove('selected');
                    filterState.prices = filterState.prices.filter(p => p !== price);
                } else {
                    element.classList.add('selected');
                    filterState.prices.push(price);
                }
            } else if (type === 'brand') {
                const brand = element.dataset.brand;
                if (element.classList.contains('selected')) {
                    element.classList.remove('selected');
                    filterState.brands = filterState.brands.filter(b => b !== brand);
                } else {
                    element.classList.add('selected');
                    filterState.brands.push(brand);
                }
            }
        }

        // Populate brand filters
        function populateBrandFilters() {
            const products = getProducts();
            const brands = new Set();

            products.forEach(p => {
                const brand = getProductBrand(p);
                if (brand) brands.add(brand);
            });

            const sortedBrands = Array.from(brands).sort();

            // Desktop brand menu
            const brandMenu = document.getElementById('brandMenu');
            if (brandMenu) {
                brandMenu.innerHTML = sortedBrands.map(brand => `
                    <div class="filter-option" data-brand="${brand}" onclick="selectBrandFilter(this)">
                        <input type="checkbox"> ${brand}
                    </div>
                `).join('');
            }

            // Mobile brand chips
            const mobileBrandOptions = document.getElementById('mobileBrandOptions');
            if (mobileBrandOptions) {
                mobileBrandOptions.innerHTML = sortedBrands.map(brand => `
                    <div class="filter-chip" data-brand="${brand}" onclick="toggleMobileFilter(this, 'brand')">${brand}</div>
                `).join('');
            }
        }

        // Search functionality
        document.addEventListener('DOMContentLoaded', function () {
            const searchInput = document.getElementById('searchInput');
            const searchClear = document.getElementById('searchClear');

            if (searchInput) {
                searchInput.addEventListener('input', function () {
                    filterState.search = this.value;
                    searchClear.style.display = this.value ? 'block' : 'none';
                    applyFilters();
                });
            }

            if (searchClear) {
                searchClear.addEventListener('click', function () {
                    searchInput.value = '';
                    filterState.search = '';
                    this.style.display = 'none';
                    applyFilters();
                });
            }

            // Populate brands on load
            populateBrandFilters();
        });
    </script>
</body>

</html>